import pytest
from handler import fetch_user
event_list = [
    {'pathParameters': {}},
    {'pathParameters': {'uid': 'test'}},
]
event = {'resource': '/users', 'path': '/users', 'httpMethod': 'GET', 'headers': {'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'pt,pt-BR;q=0.9,en-US;q=0.8,en;q=0.7', 'CloudFront-Forwarded-Proto': 'https', 'CloudFront-Is-Desktop-Viewer': 'true', 'CloudFront-Is-Mobile-Viewer': 'false', 'CloudFront-Is-SmartTV-Viewer': 'false', 'CloudFront-Is-Tablet-Viewer': 'false', 'CloudFront-Viewer-Country': 'BR', 'Host': 'ttbwmngwjl.execute-api.us-east-1.amazonaws.com', 'sec-ch-ua': '"Google Chrome";v="87", " Not;A Brand";v="99", "Chromium";v="87"', 'sec-ch-ua-mobile': '?0', 'sec-fetch-dest': 'document', 'sec-fetch-mode': 'navigate', 'sec-fetch-site': 'cross-site', 'sec-fetch-user': '?1', 'upgrade-insecure-requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36', 'Via': '2.0 24c6dc8093de74eaa810dc6802083553.cloudfront.net (CloudFront)', 'X-Amz-Cf-Id': 'Mm6XoyTMO--LCPzTZEeWvyAqhAbRVKtf8p2FXHBEuRpOeVeEmgjM0g==', 'X-Amzn-Trace-Id': 'Root=1-607d8ca3-612b023215f7555e53861412', 'X-Forwarded-For': '200.170.220.42, 70.132.44.76', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https'}, 'multiValueHeaders': {'Accept': ['text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9'], 'Accept-Encoding': ['gzip, deflate, br'], 'Accept-Language': ['pt,pt-BR;q=0.9,en-US;q=0.8,en;q=0.7'], 'CloudFront-Forwarded-Proto': ['https'], 'CloudFront-Is-Desktop-Viewer': ['true'], 'CloudFront-Is-Mobile-Viewer': ['false'], 'CloudFront-Is-SmartTV-Viewer': ['false'], 'CloudFront-Is-Tablet-Viewer': ['false'], 'CloudFront-Viewer-Country': ['BR'], 'Host': ['ttbwmngwjl.execute-api.us-east-1.amazonaws.com'], 'sec-ch-ua': ['"Google Chrome";v="87", " Not;A Brand";v="99", "Chromium";v="87"'], 'sec-ch-ua-mobile': ['?0'], 'sec-fetch-dest': ['document'], 'sec-fetch-mode': ['navigate'], 'sec-fetch-site': ['cross-site'], 'sec-fetch-user': ['?1'], 'upgrade-insecure-requests': ['1'], 'User-Agent': ['Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36'], 'Via': ['2.0 24c6dc8093de74eaa810dc6802083553.cloudfront.net (CloudFront)'], 'X-Amz-Cf-Id': ['Mm6XoyTMO--LCPzTZEeWvyAqhAbRVKtf8p2FXHBEuRpOeVeEmgjM0g=='], 'X-Amzn-Trace-Id': ['Root=1-607d8ca3-612b023215f7555e53861412'], 'X-Forwarded-For': ['200.170.220.42, 70.132.44.76'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https']}, 'queryStringParameters': None, 'multiValueQueryStringParameters': None, 'pathParameters': None, 'stageVariables': None, 'requestContext': {'resourceId': '4t9l96', 'resourcePath': '/users', 'httpMethod': 'GET', 'extendedRequestId': 'eCLpmHr8IAMF13A=', 'requestTime': '19/Apr/2021:13:58:59 +0000', 'path': '/prod/users', 'accountId': '223438343962', 'protocol': 'HTTP/1.1', 'stage': 'prod', 'domainPrefix': 'ttbwmngwjl', 'requestTimeEpoch': 1618840739775, 'requestId': '584888cd-9c0b-4244-935b-ec2d7cb0a08a', 'identity': {'cognitoIdentityPoolId': None, 'accountId': None, 'cognitoIdentityId': None, 'caller': None, 'sourceIp': '200.170.220.42', 'principalOrgId': None, 'accessKey': None, 'cognitoAuthenticationType': None, 'cognitoAuthenticationProvider': None, 'userArn': None, 'userAgent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36', 'user': None}, 'domainName': 'ttbwmngwjl.execute-api.us-east-1.amazonaws.com', 'apiId': 'ttbwmngwjl'}, 'body': None, 'isBase64Encoded': False}
r = fetch_user(event)
print(r)